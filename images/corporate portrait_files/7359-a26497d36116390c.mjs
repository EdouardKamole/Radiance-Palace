"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7359],{17314:(e,t,r)=>{r.d(t,{Z:()=>u});var i,n,s=r(813653),o=r(861470),a=0,l=0;let u=function(e,t,r){var u=t&&r||0,c=t||Array(16),d=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==h){var p=e.random||(e.rng||s.Z)();null==d&&(d=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=n=(p[6]<<8|p[7])&16383)}var m=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:l+1,b=m-a+(f-l)/1e4;if(b<0&&void 0===e.clockseq&&(h=h+1&16383),(b<0||m>a)&&void 0===e.nsecs&&(f=0),f>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");a=m,l=f,n=h;var v=((268435455&(m+=122192928e5))*1e4+f)%4294967296;c[u++]=v>>>24&255,c[u++]=v>>>16&255,c[u++]=v>>>8&255,c[u++]=255&v;var g=m/4294967296*1e4&268435455;c[u++]=g>>>8&255,c[u++]=255&g,c[u++]=g>>>24&15|16,c[u++]=g>>>16&255,c[u++]=h>>>8|128,c[u++]=255&h;for(var y=0;y<6;++y)c[u+y]=d[y];return t||(0,o.Z)(c)}},105737:(e,t,r)=>{function i(e,t,r){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1)if(!s(e[i],t[i],r+1))return!1;return!0}function n(e,t,r){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let i in e)if(!(i in t)||!s(e[i],t[i],r+1))return!1;return!0}function s(e,t,r){if(r>=1e3)return!1;if(e===t)return!0;if(null==e||null==t||"object"!=typeof e&&"object"!=typeof t)return e!=e&&t!=t;let s=Object.prototype.toString.call(e);if(s!==Object.prototype.toString.call(t))return!1;switch(s){case"[object Array]":return i(e,t,r);case"[object Set]":return i(Array.from(e).sort(),Array.from(t).sort(),r);case"[object Object]":case"[object Arguments]":return n(e,t,r);case"[object Map]":return n(Object.fromEntries(e),Object.fromEntries(t),r);case"[object RegExp]":return e+""==t+"";case"[object Error]":return e.name===t.name&&e.message===t.message;default:return!1}}function o(e,t){return s(e,t,0)}r.d(t,{ZP:()=>o,qP:()=>i})},541841:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(667294),n=r(973935);function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class o extends i.Component{constructor(...e){super(...e),s(this,"observer",null),s(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){let e=n.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return i.Children.only(this.props.children)}}let a=o},59545:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(667294);function n(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class s extends i.Component{constructor(...e){super(...e),n(this,"ref",(0,i.createRef)()),n(this,"observer",null),n(this,"handleVisibilityChanged",(e,t)=>{this.props.onVisibilityChange(e,t)})}componentDidMount(){this.ref&&this.ref.current&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.ref.current))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.ref.current),delete this.observer)}render(){return this.props.children(this.ref)}}let o=s},579814:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(372085),n=r(624797);let s=(e=()=>{})=>{let t=(0,n.mB)(window.location.search),{invite_code:r}=t;if(!r){e(t);return}let s=encodeURIComponent(encodeURIComponent(r));(0,i.Z)({url:"/v3/invite_code/attribution/land/",method:"POST",data:{invite_code:s}})}},627408:(e,t,r)=>{r.d(t,{Z:()=>_});var i=r(667294),n=r(883119),s=r(541841),o=r(901855),a=r(59545),l=r(340523),u=r(5859),c=r(520893),d=r(503325);let{Provider:h,useMaybeHook:p}=(0,r(342513).Z)("timeSpentContext");var m=r(28449),f=r(19447),b=r(785893);function v(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class g extends i.Component{constructor(e){super(e),v(this,"componentWillUnmount",()=>{this.unregisterComponent()}),v(this,"getContext",()=>{let{clientTrackingParams:e,component:t,element:r,objectId:i,timeSpentContext:n,view:s,viewParameter:o}=this.props;return{view:s||n?.view,viewParameter:o||n?.viewParameter,component:t||n?.component,element:r,objectId:i||n?.objectId,clientTrackingParams:e||n?.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}}),v(this,"getLoggerContext",()=>{let e={...this.getContext()};return delete e.getParentUuid,e}),v(this,"getParentId",()=>{let{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){let t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0}),v(this,"getUuid",()=>this.state.timedPair?this.state.timedPair.uuid:void 0),v(this,"getTimedPair",()=>this.state.timedPair),v(this,"setTimedPair",(e,t)=>{this.setState({timedPair:e},()=>{t&&t()})}),v(this,"isRegistered",!1),v(this,"registerComponent",()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0}),v(this,"unregisterComponent",()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)}),v(this,"handleVisibilityChange",e=>{let{intersectionRatio:t}=e[0],{bottom:r,left:i,right:n,top:s}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===r&&0===i&&0===n&&0===s?this.unregisterComponent():this.registerComponent())}),this.state={timedPair:new d.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,c.Z)(e.auxData,this.props.auxData)&&(0,c.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){let{children:e,intersectionObserverExpEnabled:t}=this.props;return t?(0,b.jsx)(h,{value:this.getContext(),children:(0,b.jsx)(a.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:t=>(0,b.jsx)(n.xu,{ref:t,children:i.Children.only(e)})})}):(0,b.jsx)(h,{value:this.getContext(),children:(0,b.jsx)(s.Z,{onVisibilityChange:this.handleVisibilityChange,options:{threshold:0},children:i.Children.only(e)})})}}function y(e){let t=(0,o.Hv)(),r=p(),n=(0,m.Z)(),s=(0,f.H0)(),{requestIdentifier:a="",isAuthenticated:c}=(0,u.B)(),d={app_instance_id:a.slice(0,8),...e.auxData??{}},{checkExperiment:h}=(0,l.F)(),v=h(c?"web_intersection_observer_migration_auth":"web_intersection_observer_migration_unauth").anyEnabled;return(0,i.useEffect)(()=>{n?.setHistoryStackContext(t)},[t,n]),(0,i.useEffect)(()=>{n?.setPins(s??{})},[s,n]),n?(0,b.jsx)(g,{...e,auxData:d,intersectionObserverExpEnabled:v,timeSpentContext:r,timeSpentManager:n,children:e.children}):e.children}y.displayName="TimeSpent";let _=y},503325:(e,t,r)=>{r.d(t,{Z:()=>a});var i=r(172045),n=r(17314);function s(e,t,r){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let o="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now(),a=class{constructor(e){s(this,"start",()=>(this.startTime=o(),this.startTime)),s(this,"end",()=>(this.endTime=o(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration));try{this.uuid=(0,i.Z)()}catch(e){this.uuid=(0,n.Z)()}e&&Object.assign(this,e)}}},28449:(e,t,r)=>{r.d(t,{$:()=>i,Z:()=>s});let{Provider:i,useMaybeHook:n}=(0,r(342513).Z)("TimeSpentManagerContext"),s=n},446653:(e,t,r)=>{r.d(t,{r:()=>_,K:()=>y});var i=r(667294),n=r(342513),s=r(340523),o=r(757640),a=r(149722),l=r(998577),u=r(573810),c=r(325362);let d=e=>{let t={};for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&("object"!=typeof e[r]||null===e[r]||Array.isArray(e[r])?t[(0,c.Z)(r)]=e[r]:t[(0,c.Z)(r)]=d(e[r]));return t},h=(e,t)=>{let r=[];for(let i in e)i!==t&&r.push({id:i,...d(e[i])});let i=r.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),n=new Map;for(let e of i)n.set(e.id,e);return n},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},f=({dispatch:e,isEnabled:t,state:r})=>{let{orbacVisibility:n,disableProfileChanger:s,headerVisible:o}=r,a=(0,i.useCallback)(r=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:r})},[t,e]);return{changeProfile:a,toggleORBACVisibility:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:r??!n})},[t,e,n]),toggleDisableProfileChanger:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:r??!s})},[t,e,s]),toggleHeaderVisibility:(0,i.useCallback)(r=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:r??!o})},[t,e,o])}},b=e=>{let[t,r]=(0,i.useReducer)(m,p),n=f({dispatch:r,isEnabled:e,state:t}),{activeProfile:s,orbacVisibility:o}=t;return(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacActiveProfile",!1);e&&r({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,i.useEffect)(()=>{let e=(0,u.qn)("orbacVisibilty",!1);e&&r({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacVisibility",o)},[o]),(0,i.useEffect)(()=>{(0,u.Nh)("orbacActiveProfile",s)},[s]),{state:t,actions:n,receiveProfiles:(0,i.useCallback)((e,t)=>{r({type:"LOAD_PROFILES",payload:h(e,t)})},[r])}};var v=r(785893);let{Provider:g,useMaybeHook:y}=(0,n.Z)("RoleBasedAccessControlContext"),_=({children:e})=>{let t;let{checkExperiment:r}=(0,s.F)(),n=(0,a.Z)(),u=!!(n.isAuth&&n.isPartner&&r("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:d,receiveProfiles:h}=b(u),{activeProfile:p,headerVisible:m,profiles:f=[]}=c,y=f?Array.from(f.values()):[],_=(0,l.Z)(y),C=!!n.isAuth&&y.length>0&&_,w=n.isAuth?n.id:"",E=n.isAuth?n.username:"",{changeProfile:P,toggleORBACVisibility:A,toggleDisableProfileChanger:O,toggleHeaderVisibility:j}=d;(0,i.useEffect)(()=>{if(u){if("string"==typeof _){P(_);return}p||P(w)}},[_,w,u,P,p]),(0,i.useEffect)(()=>{u&&(C&&!m&&j(!0),!C&&m&&j(!1))},[j,C,u,m,f]);let{data:I}=(0,o.Z)(u?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),S=I?.profiles;n&&n.isAuth&&c.activeProfile===n.id?t={id:n.id,permissions:["OWNER"],user:{username:E,businessName:n.fullName,imgUrl:n.imageSmallUrl}}:p&&c.profiles&&(t=c.profiles.get(p)),(0,i.useEffect)(()=>{S&&h(S,w)},[h,S,w]);let T=c.profiles?Array.from(c.profiles.values()):[];return(0,v.jsx)(g,{value:{profiles:T,headerVisible:c.headerVisible,activeProfile:t,changeProfile:P,toggleORBACVisibility:A,toggleDisableProfileChanger:O,toggleHeaderVisibility:j},children:e})}},785059:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(340523),n=r(446653),s=r(998577);let o=()=>{let{checkExperiment:e}=(0,i.F)(),t=(0,n.K)(),{activeProfile:r}=t||{},o=e("web_m10n_business_access_orbac_www").anyEnabled,a=(0,s.Z)(t?.profiles||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return o&&(!l||a)&&r&&(r.viewerMeetsMfaRequirement||(r.permissions||[]).includes("OWNER"))?r:Object.freeze({})}},998577:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(616550),n=r(741983),s=r(340523),o=r(149722),a=r(19447);let l=e=>{let t=(0,i.TH)(),r=(0,o.Z)(),l=(0,a.S6)(),{anyEnabled:u}=(0,s.F)().checkExperiment("web_m10n_business_access_orbac_www"),c=(0,i.$B)("/:username"),d=c?.params?.username,h=(0,i.$B)("/pin/:id"),p=!!h?.params?.id&&l(h.params.id)?.pinner?.id;if((0,n.ej)(t))return!1;if((0,n.RU)(t))return!0;if((0,n.mY)(t))return u;let m=e.concat(r.isAuth?{user:{username:r.username},id:r.id}:{}).find(e=>{let{user:t={},id:r}=e||{},{username:i}=t;return(!!i&&!!d||!!p&&!!r)&&(i===d||p===r)});return!!m&&m.id}},199677:(e,t,r)=>{r.d(t,{D3:()=>d,DX:()=>u,Fk:()=>i,KY:()=>h,Ms:()=>n,N1:()=>p,_P:()=>l,gJ:()=>s,lJ:()=>a,nl:()=>o,q6:()=>c});let i=(e,t)=>{let r=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(r=t.user.businessName),r},n=(e,t)=>{let r=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(r=t.user.username),r},s=(e,t)=>{let r=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(r=t.user.imgUrl),r},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),a=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,r)=>r&&r.user&&t&&t.isAuth&&r.id!==t.id?r.user.merchantId:e.advertiser?.merchant_id,u=(e,t,r)=>r&&r.user&&e.isAuth&&r.id!==e.id?r.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,c=(e,t,r)=>!!(e&&e.isAuth&&r&&r.id&&r.id!==e.id&&r.id===t),d=(e,t,r)=>!!(c(e,t,r)||e&&e.isAuth&&t===e.id),h=(e,t,r)=>d(e,t&&t.owner&&t.owner.id||"",r);function p(e,t,r){return d(e,t?t.id:"",r)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/7359-a26497d36116390c.mjs.map